require 'formula'

class Hashcat < Formula
  homepage 'http://hashcat.net/hashcat/'
  url 'http://hashcat.net/files/hashcat-0.50.7z'
  sha256 'ecbe4300306e929397f4e721f7b8476208e1be079caa2cd3c2a819fa225ca415'

  depends_on 'p7zip' => :build

  def install
    cd "hashcat-#{version}" do
      prefix.install Dir['*']
      if OS.linux?
          if Hardware.is_64_bit?
	    bin.install_symlink "#{prefix}/hashcat-cli64.bin" => 'hashcat'
	  else
	    bin.install_symlink "#{prefix}/hashcat-cli32.bin" => 'hashcat'
	  end
      else
        bin.install_symlink "#{prefix}/hashcat-cli64.app" => 'hashcat'
      end
    end
  end

  test do
    system "#{bin}/hashcat --version"
  end
end
