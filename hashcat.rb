require 'formula'

class Hashcat < Formula
  homepage 'http://hashcat.net/hashcat/'
  url 'http://hashcat.net/files/hashcat-0.50.7z'
  md5 '53a9b867b34c30b51b2f1c70477bdbd8'

  depends_on 'p7zip' => :build

  def install
    cd "hashcat-#{version}" do
      prefix.install Dir['*']
      if OS.linux?
          if Hardware.is_64_bit?
	    bin.install_symlink "#{prefix}/hashcat-cli64.bin" => 'hashcat'
	  else
	    bin.install_symlink "#{prefix}/hashcat-cli32.bin" => 'hashcat'
	  end
      else
        bin.install_symlink "#{prefix}/hashcat-cli64.app" => 'hashcat'
      end
    end
  end

  test do
    system "#{bin}/hashcat --version"
  end
end
